<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demoli√ß√£o da Casa do Jorge ‚Äî Melhorado</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body { height: 100%; }
        body {
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            font-family: 'Arial Black', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            color: white;
            overflow: hidden;
        }

        /* Layout container */
        #gameContainer {
            position: relative;
            width: min(1200px, 96vw);
            display: flex;
            gap: 20px;
            align-items: flex-start;
            justify-content: center;
        }

        /* Main game column */
        #mainGame {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            flex: 1 1 700px;
        }

        /* Responsive canvas: keep the original internal drawing size 900x700 but scale with css */
        canvas {
            aspect-ratio: 900 / 700;
            width: min(900px, 90vw);
            max-width: 900px;
            height: auto;
            background: linear-gradient(to bottom, #87CEEB 0%, #87CEEB 60%, #90EE90 60%, #228B22 100%);
            border: 4px solid #ff6b35;
            box-shadow: 0 0 30px rgba(255, 107, 53, 0.8), inset 0 0 50px rgba(0,0,0,0.3);
            cursor: crosshair;
            border-radius: 10px;
            animation: glow 2s ease-in-out infinite;
            transition: transform 0.1s;
        }

        @keyframes glow { 0%,100%{ box-shadow:0 0 30px rgba(255,107,53,0.8)}50%{box-shadow:0 0 50px rgba(255,107,53,1),0 0 80px rgba(255,107,53,0.6)} }
        @keyframes float { 0%,100%{ transform: translateY(0px);}50%{ transform: translateY(-10px);} }
        @keyframes slideIn { from { transform: translateX(100%); opacity:0 } to{ transform: translateX(0); opacity:1 } }

        #scoreTimerRow { display:flex; gap:20px; align-items:center; margin:14px 0; }
        #score { font-size: 20px; padding: 12px 20px; border-radius: 12px; background: linear-gradient(135deg, rgba(0,0,0,0.6), rgba(26,26,46,0.6)); border: 2px solid #ff6b35; text-shadow: 0 0 12px #ff6b35; }
        #timer { font-size: 20px; padding: 12px 20px; border-radius: 12px; background: linear-gradient(135deg, rgba(0,0,0,0.6), rgba(10,10,30,0.6)); border: 2px solid #ffd700; color: #ffd700; }

        #health { position: absolute; bottom: 8px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.8); padding: 10px 20px; border-radius: 10px; border: 2px solid #ff0000; font-size: 18px; color: #ff0000; text-shadow: 0 0 10px #ff0000; }

        /* Leaderboard: by default show as small corner widget */
        #leaderboard {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 15;
            width: 260px;
            max-height: 70vh;
            overflow-y: auto;
            background: linear-gradient(135deg, rgba(0,0,0,0.8), rgba(26,26,46,0.9));
            border: 3px solid #ff6b35;
            border-radius: 12px;
            padding: 12px;
            backdrop-filter: blur(8px);
            animation: slideIn 0.4s ease-out;
        }

        #leaderboard h2 { color:#ffd700; font-size:18px; text-align:center; margin-bottom:8px; }
        .leaderboard-entry { display:flex; gap:8px; align-items:center; padding:6px; border-radius:8px; background: rgba(255,255,255,0.03); margin-bottom:6px; font-size:13px; }
        .leaderboard-entry .rank{ min-width:28px; font-weight:bold; }
        .leaderboard-entry .player-name{ flex:1; overflow:hidden; text-overflow:ellipsis; white-space:nowrap }
        .leaderboard-entry .player-time{ min-width:80px; text-align:right; color:#ffd700; font-weight:bold }

        /* Game over modal */
        #gameOver {
            display:none;
            position:absolute;
            top:50%; left:50%; transform:translate(-50%,-50%);
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            padding: 30px; border-radius:14px; border:3px solid #ff6b35; z-index:50; min-width:320px;
            box-shadow: 0 0 50px rgba(255,107,53,0.8);
        }
        #gameOver h2 { color:#ff6b35; font-size:28px; margin-bottom:12px }
        #nameInput { width:100%; padding:10px; border-radius:8px; border:2px solid #ff6b35; background:rgba(0,0,0,0.5); color:white; }
        button{ background: linear-gradient(135deg, #ff6b35, #f7931e); color:white; border:none; padding:10px 16px; font-weight:bold; border-radius:8px; cursor:pointer }
        button.secondary{ background: linear-gradient(135deg,#444,#222); margin-left:8px }

        /* Main menu overlay */
        #mainMenu { position:fixed; inset:0; display:flex; align-items:center; justify-content:center; z-index:100; background: linear-gradient(180deg, rgba(0,0,0,0.6), rgba(0,0,0,0.4)); }
        .menuCard { background: linear-gradient(135deg,#11121a,#16182b); border-radius:16px; padding:30px; border:3px solid #ffd700; text-align:center; box-shadow: 0 0 40px rgba(0,0,0,0.6); }
        .menuCard h1{ color:#ffd700; font-size:32px; margin-bottom:12px; }
        .menuCard p{ color:#fff; margin-bottom:12px }
        .menuActions{ display:flex; gap:12px; justify-content:center; margin-top:8px }

        /* Media queries: on wide screens show leaderboard as sidebar */
        @media (min-width: 1000px) {
            #gameContainer { align-items:flex-start }
            #leaderboard { position: static; width: 320px; max-height: 770px; margin-left:12px; }
            #gameContainer { display:flex }
        }

        @media (max-width: 600px) {
            #leaderboard { width: 220px; right: 12px; top: 12px }
            #score, #timer { font-size:16px; padding:8px 12px }
            #health{ font-size:16px; bottom:6px }
        }
    </style>
</head>
<body>
    <!-- Main menu -->
    <div id="mainMenu">
        <div class="menuCard">
            <h1>Demoli√ß√£o da Casa do Jorge</h1>
            <p>Destrua a casa o mais r√°pido poss√≠vel. Clique/tap nas bombas para lan√ß√°-las √† casa.</p>
            <div class="menuActions">
                <button id="playBtn">Jogar</button>
                <button class="secondary" id="howBtn">Como Jogar</button>
            </div>
            <p style="margin-top:10px; font-size:13px; color:#ddd">Leaderboard mostra quem destruiu a casa mais r√°pido.</p>
        </div>
    </div>

    <div id="gameContainer">
        <div id="mainGame">
            <div id="scoreTimerRow">
                <div id="score">Pontua√ß√£o: 0 | Acertos: 0</div>
                <div id="timer">Tempo: 00:00.0</div>
            </div>
            <canvas id="gameCanvas" width="900" height="700"></canvas>
            <div id="health">Resist√™ncia da Casa: 100%</div>
            <div id="instructions" style="margin-top:12px; font-size:14px; color:#ffd700;">üéØ Clique nas bombas para lan√ß√°-las na Casa do Jorge!</div>
        </div>

        <div id="leaderboard">
            <h2>üèÜ Mais R√°pidos (Top 10)</h2>
            <div class="loading">Carregando ranking...</div>
        </div>

        <div id="gameOver">
            <h2>VIT√ìRIA!</h2>
            <p id="finalScore" style="font-size:16px; margin:8px 0"></p>
            <p id="finalTime" style="font-size:16px; margin:8px 0; color:#ffd700"></p>
            <input type="text" id="nameInput" placeholder="Digite seu nome" maxlength="20">
            <div style="margin-top:12px; display:flex; gap:8px; justify-content:center">
                <button id="submitScore">Enviar Pontua√ß√£o</button>
                <button class="secondary" id="playAgain">Jogar Novamente</button>
            </div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getDatabase, ref, push, onValue, query, orderByChild, limitToLast } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';

        const firebaseConfig = {
            apiKey: "AIzaSyA8azNy6GEgD190y_fW91ahUbKa1w5veik",
            authDomain: "aawards.firebaseapp.com",
            databaseURL: "https://aawards-default-rtdb.firebaseio.com",
            projectId: "aawards",
            storageBucket: "aawards.firebasestorage.app",
            messagingSenderId: "839334918366",
            appId: "1:839334918366:web:454a259fa3e2665b46ea4f",
            measurementId: "G-NLLMB9THVX"
        };

        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);
        const scoresRef = ref(database, 'bombaJorge/scores');

        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        // Game state
        let score = 0, hits = 0, houseHealth = 100;
        let gameRunning = false;
        let bombs = [], explosions = [], clouds = [], stars = [];
        let combo = 0, comboTimer = 0;

        // Timer for speed leaderboard
        let startTime = null, timerInterval = null, timeElapsed = 0;

        // Mobile difficulty tweak
        const isMobile = (/Mobi|Android|iPhone|iPad|iPod/.test(navigator.userAgent) || navigator.maxTouchPoints > 0);
        const mobileDifficulty = isMobile ? 1.18 : 1.0; // slight increase on mobile

        // Keep drawing-space constants matching the canvas internal size
        const CANVAS_W = 900, CANVAS_H = 700;

        // Stars and clouds (positioned relative to internal canvas dims)
        for (let i = 0; i < 50; i++) stars.push({ x: Math.random() * CANVAS_W, y: Math.random() * CANVAS_H * 0.6, size: Math.random() * 2, twinkle: Math.random() * Math.PI * 2 });
        for (let i = 0; i < 5; i++) clouds.push({ x: Math.random() * CANVAS_W, y: Math.random() * 200, size: 40 + Math.random() * 40, speed: (0.3 + Math.random() * 0.5) * (isMobile ? 1.2 : 1) });

        const house = { x: CANVAS_W / 2 - 100, y: CANVAS_H - 200, width: 200, height: 150, shaking: 0 };

        class Bomb {
            constructor() {
                this.x = Math.random() * (CANVAS_W - 100) + 50;
                this.y = -30;
                this.size = 15;
                // make bombs a bit faster on mobile
                this.speed = (2 + Math.random() * 2) * mobileDifficulty;
                this.launched = false;
                this.vx = 0; this.vy = 0;
                // clickable radius slightly reduced on mobile to balance touch advantage
                this.clickRadius = this.size + 10 - (isMobile ? 3 : 0);
            }
            update() {
                if (!this.launched) {
                    this.y += this.speed;
                } else {
                    this.x += this.vx; this.y += this.vy; this.vy += 0.3 * mobileDifficulty;
                }
            }
            draw() {
                ctx.fillStyle = '#2a2a2a';
                ctx.beginPath(); ctx.ellipse(this.x, this.y, this.size, this.size * 1.3, 0, 0, Math.PI*2); ctx.fill();
                ctx.strokeStyle = '#8B4513'; ctx.lineWidth = 3; ctx.beginPath(); ctx.moveTo(this.x, this.y - this.size * 1.3); ctx.lineTo(this.x + 5, this.y - this.size * 1.8); ctx.stroke();
                if (!this.launched) { ctx.fillStyle = Math.random() > 0.5 ? '#ff6600' : '#ffaa00'; ctx.beginPath(); ctx.arc(this.x + 5, this.y - this.size * 1.8, 3, 0, Math.PI*2); ctx.fill(); }
            }
            checkClick(mx, my) { const dist = Math.sqrt((mx - this.x) ** 2 + (my - this.y) ** 2); return dist < this.clickRadius; }
            checkHouseCollision() { return this.x > house.x && this.x < house.x + house.width && this.y > house.y && this.y < house.y + house.height; }
        }

        class Explosion {
            constructor(x, y, big = false) {
                this.x = x; this.y = y; this.particles = []; const count = big ? 30 : 20;
                for (let i=0;i<count;i++) this.particles.push({ x:0, y:0, vx:(Math.random()-0.5)*(big?12:8), vy:(Math.random()-0.5)*(big?12:8), life: big?50:40, maxLife: big?50:40, size: big?6:4 });
            }
            update(){ this.particles.forEach(p=>{ p.x+=p.vx; p.y+=p.vy; p.vy+=0.2; p.life--; }); this.particles = this.particles.filter(p=>p.life>0); }
            draw(){ this.particles.forEach(p=>{ const alpha = p.life / p.maxLife; const colors = ['#ff4500','#ff6600','#ffaa00','#ff8800']; ctx.fillStyle = colors[Math.floor(Math.random()*colors.length)] + Math.floor(alpha*255).toString(16).padStart(2,'0'); ctx.beginPath(); ctx.arc(this.x + p.x, this.y + p.y, p.size, 0, Math.PI*2); ctx.fill(); }); }
            isDone(){ return this.particles.length === 0; }
        }

        function drawHouse() {
            ctx.save(); if (house.shaking > 0) { ctx.translate(Math.random() * 6 - 3, Math.random() * 6 - 3); house.shaking--; }
            const damage = 1 - (houseHealth / 100);
            ctx.fillStyle = damage > 0.5 ? '#8B4513' : '#D2691E'; ctx.fillRect(house.x, house.y + 50, house.width, 100);
            ctx.fillStyle = damage > 0.3 ? '#8B0000' : '#DC143C'; ctx.beginPath(); ctx.moveTo(house.x - 20, house.y + 50); ctx.lineTo(house.x + house.width / 2, house.y); ctx.lineTo(house.x + house.width + 20, house.y + 50); ctx.closePath(); ctx.fill();
            ctx.fillStyle = damage > 0.7 ? '#333333' : '#87CEEB'; ctx.fillRect(house.x + 30, house.y + 80, 40, 40); ctx.fillRect(house.x + 130, house.y + 80, 40, 40);
            ctx.fillStyle = '#654321'; ctx.fillRect(house.x + 80, house.y + 100, 40, 50);
            ctx.fillStyle = '#F5DEB3'; ctx.fillRect(house.x + 50, house.y - 30, 100, 25);
            ctx.fillStyle = '#000000'; ctx.font = 'bold 14px Arial'; ctx.textAlign = 'center'; ctx.fillText('Casa do Jorge', house.x + 100, house.y - 10);
            if (damage > 0.2) { ctx.strokeStyle = '#000000'; ctx.lineWidth = 2; for (let i=0;i<damage*10;i++){ ctx.beginPath(); const x = house.x + Math.random()*house.width; const y = house.y + 50 + Math.random()*100; ctx.moveTo(x,y); ctx.lineTo(x + Math.random()*20 - 10, y + Math.random()*30); ctx.stroke(); } }
            ctx.restore();
        }

        function drawClouds(){ clouds.forEach(cloud=>{ ctx.fillStyle = 'rgba(255,255,255,0.7)'; ctx.beginPath(); ctx.arc(cloud.x, cloud.y, cloud.size, 0, Math.PI*2); ctx.arc(cloud.x + cloud.size*0.6, cloud.y, cloud.size*0.8, 0, Math.PI*2); ctx.arc(cloud.x + cloud.size*1.2, cloud.y, cloud.size*0.9, 0, Math.PI*2); ctx.fill(); cloud.x += cloud.speed; if (cloud.x > CANVAS_W + cloud.size*2) cloud.x = -cloud.size*2; }); }
        function drawStars(){ stars.forEach(star=>{ star.twinkle+=0.05; const alpha=(Math.sin(star.twinkle)+1)/2; ctx.fillStyle = `rgba(255,255,255,${alpha*0.8})`; ctx.beginPath(); ctx.arc(star.x, star.y, star.size, 0, Math.PI*2); ctx.fill(); }); }
        function drawGround(){ ctx.fillStyle = '#228B22'; ctx.fillRect(0, CANVAS_H - 50, CANVAS_W, 50); for (let i=0;i<10;i++){ const x=(i*CANVAS_W/10)+20; ctx.fillStyle = ['#FF69B4','#FFFF00','#FF0000'][i%3]; ctx.beginPath(); ctx.arc(x, CANVAS_H - 55, 5, 0, Math.PI*2); ctx.fill(); } }

        function spawnBomb(){ if (gameRunning && houseHealth > 0) bombs.push(new Bomb()); }

        function updateScoreUI(){ document.getElementById('score').textContent = `Pontua√ß√£o: ${score} | Acertos: ${hits}`; document.getElementById('health').textContent = `Resist√™ncia da Casa: ${Math.max(0, Math.round(houseHealth))}%`; if (houseHealth <= 0) gameOver(); }

        function formatTime(ms){ const total = Math.max(0, ms); const minutes = Math.floor(total / 60000); const seconds = Math.floor((total % 60000) / 1000); const tenths = Math.floor((total % 1000) / 100); return `${String(minutes).padStart(2,'0')}:${String(seconds).padStart(2,'0')}.${tenths}`; }

        function startTimer(){ startTime = Date.now(); timeElapsed = 0; document.getElementById('timer').textContent = `Tempo: 00:00.0`; if (timerInterval) clearInterval(timerInterval); timerInterval = setInterval(()=>{ timeElapsed = Date.now() - startTime; document.getElementById('timer').textContent = `Tempo: ${formatTime(timeElapsed)}`; }, 100); }
        function stopTimer(){ if (timerInterval) clearInterval(timerInterval); }

        function gameOver(){ gameRunning = false; stopTimer(); const finalTime = timeElapsed; document.getElementById('finalScore').textContent = `Casa Destru√≠da! Pontua√ß√£o Final: ${score} | Total de Acertos: ${hits}`; document.getElementById('finalTime').textContent = `Seu tempo: ${formatTime(finalTime)}`; document.getElementById('gameOver').style.display = 'block'; document.getElementById('nameInput').value = ''; document.getElementById('submitScore').disabled = false; // store last run time for convenience
            window._lastRun = { score, hits, timeTaken: finalTime };
        }

        function resetState(){ score = 0; hits = 0; houseHealth = 100; gameRunning = false; bombs = []; explosions = []; combo = 0; comboTimer = 0; house.shaking = 0; updateScoreUI(); document.getElementById('gameOver').style.display = 'none'; }

        function startGame() {
            resetState(); gameRunning = true; document.getElementById('mainMenu').style.display = 'none'; startTimer(); // spawn interval slightly faster on mobile to increase difficulty
            spawnInterval = setInterval(spawnBomb, isMobile ? 1000 : 1200);
            // Start the loop if not already running
            if (!window._gameLoopRunning) { window._gameLoopRunning = true; gameLoop(); }
        }

        window.restartGame = function(){ document.getElementById('gameOver').style.display = 'none'; startGame(); }

        window.submitScore = async function(){ const nameInput = document.getElementById('nameInput'); const playerName = nameInput.value.trim(); if (!playerName) { alert('Por favor, digite seu nome!'); return; } document.getElementById('submitScore').disabled = true; try{ const payload = { name: playerName, score: score, hits: hits, timeTaken: (window._lastRun?.timeTaken ?? timeElapsed), timestamp: Date.now() }; await push(scoresRef, payload); alert('Pontua√ß√£o enviada com sucesso!'); nameInput.value=''; } catch(e){ console.error('Erro ao enviar pontua√ß√£o', e); alert('Erro ao enviar pontua√ß√£o. Tente novamente.'); document.getElementById('submitScore').disabled = false; } }

        async function loadLeaderboard(){ // grab last 200 entries to compute top fastest
            const leaderboardQuery = query(scoresRef, limitToLast(200));
            onValue(leaderboardQuery, (snapshot) => {
                const leaderboardDiv = document.getElementById('leaderboard'); const scoresArr = [];
                snapshot.forEach(child => scoresArr.push({ id: child.key, ...child.val() }));
                // keep only entries that have timeTaken (completed runs). Sort by timeTaken asc (fastest first)
                const valid = scoresArr.filter(s => s.timeTaken !== undefined && s.timeTaken !== null);
                valid.sort((a,b) => a.timeTaken - b.timeTaken);
                const top10 = valid.slice(0,10);
                let html = '<h2>üèÜ Mais R√°pidos (Top 10)</h2>';
                if (top10.length === 0) html += '<div class="loading">Nenhuma marca registrada ainda. Seja o primeiro!</div>';
                else {
                    top10.forEach((entry, idx) => {
                        const rank = idx+1; const medal = rank===1? 'ü•á' : rank===2? 'ü•à' : rank===3? 'ü•â' : `${rank}¬∫`;
                        html += `\n<div class="leaderboard-entry">\n  <div class="rank">${medal}</div>\n  <div class="player-name">${entry.name}</div>\n  <div class="player-time">${formatTime(entry.timeTaken)}</div>\n</div>`;
                    });
                }
                leaderboardDiv.innerHTML = html;
            });
        }

        // Click handling (map mouse coords to canvas internal coords)
        canvas.addEventListener('click', (e) => {
            if (!gameRunning) return;
            const rect = canvas.getBoundingClientRect();
            // map to internal canvas coordinates (900x700)
            const scaleX = CANVAS_W / rect.width; const scaleY = CANVAS_H / rect.height;
            const mx = (e.clientX - rect.left) * scaleX; const my = (e.clientY - rect.top) * scaleY;
            for (let i = bombs.length - 1; i >= 0; i--) {
                if (!bombs[i].launched && bombs[i].checkClick(mx, my)) {
                    const bomb = bombs[i]; bomb.launched = true;
                    const targetX = house.x + house.width/2; const targetY = house.y + house.height/2;
                    const dx = targetX - bomb.x; const dy = targetY - bomb.y; const dist = Math.sqrt(dx*dx + dy*dy) || 1;
                    bomb.vx = (dx / dist) * 8 * (isMobile ? 0.95 : 1);
                    bomb.vy = (dy / dist) * 8 * (isMobile ? 0.95 : 1) - 5;
                    combo++; comboTimer = 60; const bonusPoints = combo > 1 ? 5 * combo : 5; score += bonusPoints; updateScoreUI();
                    for (let j=0;j<5;j++) explosions.push(new Explosion(bomb.x, bomb.y, false));
                    break;
                }
            }
        });

        // Game loop
        function gameLoop(){
            // clear with gradient
            const gradient = ctx.createLinearGradient(0,0,0,CANVAS_H);
            gradient.addColorStop(0,'#4A90E2'); gradient.addColorStop(0.5,'#87CEEB'); gradient.addColorStop(0.6,'#87CEEB'); gradient.addColorStop(0.6,'#90EE90'); gradient.addColorStop(1,'#228B22');
            ctx.fillStyle = gradient; ctx.fillRect(0,0,CANVAS_W,CANVAS_H);
            drawStars(); drawClouds(); drawGround(); drawHouse(); drawCombo();

            bombs.forEach((bomb, index) => {
                bomb.update(); bomb.draw();
                if (bomb.launched && bomb.checkHouseCollision()) {
                    explosions.push(new Explosion(bomb.x, bomb.y, true)); bombs.splice(index,1);
                    houseHealth -= 10; hits++; const bonusPoints = combo > 1 ? 20 * combo : 20; score += bonusPoints; house.shaking = 15; updateScoreUI();
                    for (let i=0;i<3;i++){ setTimeout(()=>{ explosions.push(new Explosion(bomb.x + (Math.random()-0.5)*40, bomb.y + (Math.random()-0.5)*40, false)); }, i*100); }
                } else if (bomb.y > CANVAS_H + 50) { bombs.splice(index,1); }
            });

            explosions.forEach((explosion, index)=>{ explosion.update(); explosion.draw(); if (explosion.isDone()) explosions.splice(index,1); });

            if (gameRunning) requestAnimationFrame(gameLoop);
            else window._gameLoopRunning = false;
        }

        function drawCombo(){ if (comboTimer > 0){ comboTimer--; const scale = 1 + (Math.sin(Date.now()*0.01)*0.1); ctx.save(); ctx.translate(CANVAS_W/2, 80); ctx.scale(scale, scale); ctx.font = 'bold 48px Arial'; ctx.fillStyle = '#FFD700'; ctx.strokeStyle = '#FF6B35'; ctx.lineWidth = 4; ctx.textAlign = 'center'; ctx.strokeText(`COMBO x${combo}!`, 0, 0); ctx.fillText(`COMBO x${combo}!`, 0, 0); ctx.restore(); } else { combo = 0; } }

        // UI wiring
        document.getElementById('playBtn').addEventListener('click', startGame);
        document.getElementById('howBtn').addEventListener('click', ()=> alert('Clique ou toque nas bombas para lan√ß√°-las √† casa. Destrua a casa o mais r√°pido que conseguir!'));
        document.getElementById('playAgain').addEventListener('click', ()=> { document.getElementById('gameOver').style.display='none'; startGame(); });
        document.getElementById('submitScore').addEventListener('click', window.submitScore);

        // Leaderboard loader
        loadLeaderboard();

        // Start spawning only after pressing play; but keep an initial minimal spawn so the menu looks alive
        let spawnInterval = null;

        // If user wants to preview before playing, spawn a single bomb occasionally
        setInterval(()=>{ if (!gameRunning) { if (Math.random() < 0.3) spawnBomb(); } }, 2500);

        // ensure the canvas internal drawing buffer size is correct (we use internal 900x700 constants)
        canvas.width = CANVAS_W; canvas.height = CANVAS_H;

        // make canvas responsive visually by css (already handled) ‚Äî internal drawing uses fixed coordinates

    </script>
</body>
</html>
